# Contributing to langgraph-rs

Thank you for your interest in contributing to langgraph-rs! This document provides guidelines and instructions for contributing to the project.

## Code of Conduct

By participating in this project, you agree to abide by our Code of Conduct:
- Be respectful and inclusive
- Welcome newcomers and help them get started
- Focus on constructive criticism
- Respect differing viewpoints and experiences

## Getting Started

1. **Fork the repository** and clone your fork
2. **Set up your development environment**:
   ```bash
   # Install Rust (if not already installed)
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

   # Install Python 3.8+ for PyO3 integration
   python3 --version  # Verify Python 3.8+

   # Build the project
   cargo build --workspace

   # Run tests
   cargo test --workspace
   ```

3. **Read the documentation**:
   - [README.md](README.md) - Project overview
   - [AGENTS.md](AGENTS.md) - Development guidelines and architecture
   - [TODO.md](TODO.md) - Current priorities and roadmap

## Development Workflow

### 1. Create a Feature Branch

**Never work directly on main!**

```bash
# For new features
git checkout -b feat/your-feature-name

# For bug fixes
git checkout -b fix/bug-description

# For exploration/experiments
git checkout -b explore/what-you-are-testing
```

### 2. Make Your Changes

- Follow the existing code style and patterns
- Write tests for new functionality
- Update documentation as needed
- Keep commits focused and atomic

### 3. Commit Your Changes

We use [Conventional Commits](https://www.conventionalcommits.org/):

```bash
# Feature
git commit -m "feat: add PyO3 node extraction"

# Bug fix
git commit -m "fix: handle empty state schemas"

# Documentation
git commit -m "docs: update type mapping table"

# Tests
git commit -m "test: add integration tests for generator"

# Breaking change
git commit -m "feat!: change GraphState API"
```

### 4. Push and Create a Pull Request

```bash
git push -u origin your-branch-name
```

Then create a PR on GitHub with:
- Clear title following conventional commits format
- Description of what changed and why
- Reference to any related issues
- Test results or examples

## What to Work On

Check [TODO.md](TODO.md) for current priorities. Good first issues include:
- Adding tests for existing functionality
- Improving documentation
- Implementing type mappings
- Adding examples

## Code Guidelines

### Rust Code

```rust
// Use descriptive names
async fn extract_graph_metadata(graph: &PyAny) -> Result<GraphInfo>

// Handle errors explicitly
let nodes = graph.getattr("nodes")
    .context("Failed to extract nodes")?;

// Use tracing for debugging
tracing::debug!("Processing {} nodes", nodes.len());
```

### Python Integration (PyO3)

```rust
Python::with_gil(|py| {
    // Convert to Rust types immediately
    let graph_info: GraphInfo = extract_info(py_object)?;
    Ok(graph_info)
})
```

### Testing

- Unit tests go in the same file (`#[cfg(test)] mod tests`)
- Integration tests go in `tests/` directory
- Use descriptive test names
- Test both success and error cases

## Project Structure

```
langgraph-rs/
â”œâ”€â”€ langgraph-inspector/    # Python introspection (PyO3)
â”œâ”€â”€ langgraph-generator/    # Rust code generation
â”œâ”€â”€ langgraph-runtime/      # Runtime support
â”œâ”€â”€ langgraph-cli/         # CLI interface
â”œâ”€â”€ examples/              # Example workflows
â””â”€â”€ tests/                # Integration tests
```

## Type Mapping Reference

| Python Type | Rust Type | Notes |
|------------|-----------|-------|
| str | String | Always owned |
| int | i64 | Default size |
| float | f64 | |
| bool | bool | |
| List[T] | Vec<T> | Recursive |
| Dict[K,V] | HashMap<K,V> | |
| Optional[T] | Option<T> | |
| Any | serde_json::Value | Fallback |

## Running Tests

```bash
# All tests
cargo test --workspace

# Specific module
cargo test -p langgraph-generator

# With output
cargo test -- --nocapture

# Single test
cargo test test_node_extraction
```

## Code Quality Checks

Before submitting a PR, ensure:

```bash
# Format code
cargo fmt

# Check lints
cargo clippy --all-targets --all-features

# Check documentation
cargo doc --no-deps --workspace

# Run all tests
cargo test --workspace
```

## Documentation

- Add doc comments to public APIs
- Include examples in doc comments
- Update README for user-facing changes
- Update AGENTS.md for architectural changes

## Important Rules

1. **Be Truthful**: Only claim features work when they do
2. **No AI Attribution**: Don't add "Generated by AI" comments
3. **Use Branches**: Never push directly to main
4. **Test First**: Write tests before implementing features
5. **Document Changes**: Update relevant documentation

## Getting Help

- Open an issue for bugs or feature requests
- Start a discussion for questions or ideas
- Check existing issues before creating new ones
- Join our community (Discord link coming soon)

## Recognition

Contributors will be recognized in:
- The project README
- Release notes
- Special thanks section

## License

By contributing, you agree that your contributions will be licensed under the same terms as the project (MIT OR Apache-2.0).

## Contact

- GitHub Issues: [langgraph-rs/issues](https://github.com/genai-rs/langgraph-rs/issues)
- Email: tim.van.wassenhove@gmail.com

Thank you for contributing to langgraph-rs! ðŸ¦€